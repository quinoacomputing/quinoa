# vim: filetype=sh:
# This is a comment
# Keywords are case-sensitive

title "ALE with a moving boundary with prescribed positions"

inciter

  term 6.28319  # =2*pi
  nstep 10
  cfl 0.5
  ttyi 1

  scheme alecg

  partitioning
    algorithm rcb
  end

  ale
    dvcfl 1.0
    mesh_velocity user_defined
    smoother laplace
    mesh_motion 1 2 end
    maxit 8    # for cyl_thin_9k.exo
    #maxit 22  # for cyl_thin_207k.exo
    tolerance 0.01
    bc_dirichlet
      sideset 2 end
    end
    bc_sym
      sideset 1 3 4 5 6 7 end
    end
    move
      sideset 2 end
      fntype position
      fn # t         x(t)  y(t)=sin(t)   z(t)=1-cos(t)
       0             0     0             0
       0.063466      0     0.0634239    -0.00201332
       0.126933      0     0.126592     -0.00804519
       0.1904        0     0.189251     -0.0180713
       0.253866      0     0.251148     -0.0320513
       0.317333      0     0.312033     -0.0499289
       0.380799      0     0.371662     -0.0716321
       0.444266      0     0.429795     -0.0970735
       0.507732      0     0.486197     -0.126151 
       0.571199      0     0.540641     -0.158746 
       0.634665      0     0.592908     -0.19473
       0.698132      0     0.642788     -0.233956 
       0.761598      0     0.690079     -0.276266 
       0.825065      0     0.734592     -0.321491 
       0.888531      0     0.776146     -0.369447 
       0.951998      0     0.814576     -0.419943 
       1.01546       0     0.849725     -0.472775 
       1.07893       0     0.881453     -0.527729 
       1.1424        0     0.909632     -0.584585 
       1.20586       0     0.934148     -0.643114 
       1.26933       0     0.954902     -0.70308
       1.3328        0     0.971812     -0.764241 
       1.39626       0     0.984808     -0.826352 
       1.45973       0     0.993838     -0.889162 
       1.5232        0     0.998867     -0.952418 
       1.58666       0     0.999874     -1.01587
       1.65013       0     0.996855     -1.07925
       1.7136        0     0.989821     -1.14231
       1.77706       0     0.978802     -1.20481
       1.84053       0     0.963842     -1.26647
       1.904         0     0.945001     -1.32707
       1.96746       0     0.922354     -1.38635
       2.03093       0     0.895994     -1.44407
       2.0944        0     0.866025     -1.5
       2.15786       0     0.83257      -1.55392
       2.22133       0     0.795762     -1.60561
       2.28479       0     0.75575      -1.65486
       2.34826       0     0.712694     -1.70147
       2.41173       0     0.666769     -1.74526
       2.47519       0     0.618159     -1.78605
       2.53866       0     0.56706      -1.82368
       2.60213       0     0.513677     -1.85798
       2.66559       0     0.458227     -1.88884
       2.72906       0     0.400931     -1.91611
       2.79253       0     0.34202      -1.93969
       2.85599       0     0.281733     -1.95949
       2.91946       0     0.220311     -1.97543
       2.98293       0     0.158001     -1.98744
       3.04639       0     0.095056     -1.99547
       3.10986       0     0.0317279    -1.9995
       3.17333       0    -0.0317279    -1.9995
       3.23679       0    -0.095056     -1.99547
       3.30026       0    -0.158001     -1.98744
       3.36373       0    -0.220311     -1.97543
       3.42719       0    -0.281733     -1.95949
       3.49066       0    -0.34202      -1.93969
       3.55413       0    -0.400931     -1.91611
       3.61759       0    -0.458227     -1.88884
       3.68106       0    -0.513677     -1.85798
       3.74452       0    -0.56706      -1.82368
       3.80799       0    -0.618159     -1.78605
       3.87146       0    -0.666769     -1.74526
       3.93492       0    -0.712694     -1.70147
       3.99839       0    -0.75575      -1.65486
       4.06186       0    -0.795762     -1.60561
       4.12532       0    -0.83257      -1.55392
       4.18879       0    -0.866025     -1.5
       4.25226       0    -0.895994     -1.44407
       4.31572       0    -0.922354     -1.38635
       4.37919       0    -0.945001     -1.32707
       4.44266       0    -0.963842     -1.26647
       4.50612       0    -0.978802     -1.20481
       4.56959       0    -0.989821     -1.14231
       4.63306       0    -0.996855     -1.07925
       4.69652       0    -0.999874     -1.01587
       4.75999       0    -0.998867     -0.952418
       4.82346       0    -0.993838     -0.889162
       4.88692       0    -0.984808     -0.826352
       4.95039       0    -0.971812     -0.764241
       5.01385       0    -0.954902     -0.70308
       5.07732       0    -0.934148     -0.643114
       5.14079       0    -0.909632     -0.584585
       5.20425       0    -0.881453     -0.527729
       5.26772       0    -0.849725     -0.472775
       5.33119       0    -0.814576     -0.419943
       5.39465       0    -0.776146     -0.369447
       5.45812       0    -0.734592     -0.321491
       5.52159       0    -0.690079     -0.276266
       5.58505       0    -0.642788     -0.233956
       5.64852       0    -0.592908     -0.19473
       5.71199       0    -0.540641     -0.158746
       5.77545       0    -0.486197     -0.126151
       5.83892       0    -0.429795     -0.0970735
       5.90239       0    -0.371662     -0.0716321
       5.96585       0    -0.312033     -0.0499289
       6.02932       0    -0.251148     -0.0320513
       6.09279       0    -0.189251     -0.0180713
       6.15625       0    -0.126592     -0.00804519
       6.21972       0    -0.0634239    -0.00201332
       6.28319       0     0             0
      end
    end
  end

  compflow
    mesh filename "cyl_thin_9k.exo" end
    #mesh filename "cyl_thin_207k.exo" end
    physics euler
    ic
      density 1.0 end
      velocity 0.0 0.0 0.0 end
      pressure 1.0 end
    end
    material
      gamma 1.4 end
    end
    bc_sym
      sideset 1 2 3 4 5 6 7 end
    end
  end

  diagnostics
    interval  1
    format    scientific
    error l2
  end

  field_output
    interval 5
    var
      density
      x-velocity
      y-velocity
      z-velocity
      specific_total_energy
      pressure
   end
  end

end
